
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Demo - Race Bias in Words Embedding &#8212; Ethically 0.0.2 documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Demo - Word Embedding Association Test (WEAT) [Alpha Version]" href="demo-weat-alpha.html" />
    <link rel="prev" title="Demo - Gender Bias in Words Embedding" href="demo-gender-bias-words-embedding.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="demo-race-bias-in-words-embedding">
<h1>Demo - Race Bias in Words Embedding<a class="headerlink" href="#demo-race-bias-in-words-embedding" title="Permalink to this headline">¶</a></h1>
<div class="section" id="exploratory-api-will-change-in-a-future-release">
<h2>Exploratory - API will change in a future release<a class="headerlink" href="#exploratory-api-will-change-in-a-future-release" title="Permalink to this headline">¶</a></h2>
<p>Based on:
<a class="reference external" href="https://github.com/tolga-b/debiaswe/blob/master/tutorial_example1.ipynb">https://github.com/tolga-b/debiaswe/blob/master/tutorial_example1.ipynb</a></p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pylab</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="kn">from</span> <span class="nn">ethically.we</span> <span class="k">import</span> <span class="n">BiasWordsEmbedding</span>
<span class="kn">from</span> <span class="nn">ethically.we.data</span> <span class="k">import</span> <span class="n">load_w2v_small</span><span class="p">,</span> <span class="n">BOLUKBASI_DATA</span>
</pre></div>
</div>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">w2v_small_model</span> <span class="o">=</span> <span class="n">load_w2v_small</span><span class="p">()</span>
</pre></div>
</div>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Emily&quot;</span><span class="p">,</span> <span class="s2">&quot;Aisha&quot;</span><span class="p">,</span> <span class="s2">&quot;Anne&quot;</span><span class="p">,</span> <span class="s2">&quot;Keisha&quot;</span><span class="p">,</span>
         <span class="s2">&quot;Jill&quot;</span><span class="p">,</span> <span class="s2">&quot;Tamika&quot;</span><span class="p">,</span> <span class="s2">&quot;Allison&quot;</span><span class="p">,</span> <span class="s2">&quot;Lakisha&quot;</span><span class="p">,</span>
         <span class="s2">&quot;Laurie&quot;</span><span class="p">,</span> <span class="s2">&quot;Tanisha&quot;</span><span class="p">,</span> <span class="s2">&quot;Sarah&quot;</span><span class="p">,</span> <span class="s2">&quot;Latoya&quot;</span><span class="p">,</span>
         <span class="s2">&quot;Meredith&quot;</span><span class="p">,</span> <span class="s2">&quot;Kenya&quot;</span><span class="p">,</span> <span class="s2">&quot;Carrie&quot;</span><span class="p">,</span> <span class="s2">&quot;Latonya&quot;</span><span class="p">,</span>
         <span class="s2">&quot;Kristen&quot;</span><span class="p">,</span> <span class="s2">&quot;Ebony&quot;</span><span class="p">,</span> <span class="s2">&quot;Todd&quot;</span><span class="p">,</span> <span class="s2">&quot;Rasheed&quot;</span><span class="p">,</span>
         <span class="s2">&quot;Neil&quot;</span><span class="p">,</span> <span class="s2">&quot;Tremayne&quot;</span><span class="p">,</span> <span class="s2">&quot;Geoffrey&quot;</span><span class="p">,</span> <span class="s2">&quot;Kareem&quot;</span><span class="p">,</span>
         <span class="s2">&quot;Brett&quot;</span><span class="p">,</span> <span class="s2">&quot;Darnell&quot;</span><span class="p">,</span> <span class="s2">&quot;Brendan&quot;</span><span class="p">,</span> <span class="s2">&quot;Tyrone&quot;</span><span class="p">,</span>
         <span class="s2">&quot;Greg&quot;</span><span class="p">,</span> <span class="s2">&quot;Hakim&quot;</span><span class="p">,</span> <span class="s2">&quot;Matthew&quot;</span><span class="p">,</span> <span class="s2">&quot;Jamal&quot;</span><span class="p">,</span>
         <span class="s2">&quot;Jay&quot;</span><span class="p">,</span> <span class="s2">&quot;Leroy&quot;</span><span class="p">,</span> <span class="s2">&quot;Brad&quot;</span><span class="p">,</span> <span class="s2">&quot;Jermaine&quot;</span><span class="p">]</span>

<span class="n">group1</span> <span class="o">=</span> <span class="n">names</span><span class="p">[::</span><span class="mi">2</span><span class="p">]</span>
<span class="n">group2</span> <span class="o">=</span> <span class="n">names</span><span class="p">[</span><span class="mi">1</span><span class="p">::</span><span class="mi">2</span><span class="p">]</span>
</pre></div>
</div>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">race_bias_we</span> <span class="o">=</span> <span class="n">BiasWordsEmbedding</span><span class="p">(</span><span class="n">w2v_small_model</span><span class="p">,</span>
                                  <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">race_bias_we</span><span class="o">.</span><span class="n">_identify_direction</span><span class="p">(</span><span class="s1">&#39;group1&#39;</span><span class="p">,</span> <span class="s1">&#39;group2&#39;</span><span class="p">,</span>
                                 <span class="p">[</span><span class="n">group1</span><span class="p">,</span> <span class="n">group2</span><span class="p">],</span>
                                 <span class="n">method</span><span class="o">=</span><span class="s1">&#39;sum&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Identify</span> <span class="n">direction</span> <span class="n">using</span> <span class="nb">sum</span> <span class="n">method</span><span class="o">...</span>
</pre></div>
</div>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">neutral_profession_names</span> <span class="o">=</span> <span class="n">race_bias_we</span><span class="o">.</span><span class="n">_filter_words_by_model</span><span class="p">(</span><span class="n">BOLUKBASI_DATA</span><span class="p">[</span><span class="s1">&#39;gender&#39;</span><span class="p">][</span><span class="s1">&#39;neutral_profession_names&#39;</span><span class="p">])</span>
</pre></div>
</div>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">race_bias_we</span><span class="o">.</span><span class="n">calc_direct_bias</span><span class="p">(</span><span class="n">neutral_profession_names</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mf">0.05703134608954762</span>
</pre></div>
</div>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">race_bias_we</span><span class="o">.</span><span class="n">plot_dist_projections_on_direction</span><span class="p">({</span><span class="s1">&#39;neutral_profession_names&#39;</span><span class="p">:</span> <span class="n">neutral_profession_names</span><span class="p">,</span>
                                                 <span class="s1">&#39;group1&#39;</span><span class="p">:</span> <span class="n">group1</span><span class="p">,</span>
                                                 <span class="s1">&#39;group2&#39;</span><span class="p">:</span> <span class="n">group2</span><span class="p">});</span>
</pre></div>
</div>
<img alt="../_images/exploratory-demo-race-bias-words-embedding_8_0.png" src="../_images/exploratory-demo-race-bias-words-embedding_8_0.png" />
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">race_bias_we</span><span class="o">.</span><span class="n">generate_analogies</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span>
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>x</th>
      <th>y</th>
      <th>distance</th>
      <th>score</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Sarah</td>
      <td>Keisha</td>
      <td>0.928895</td>
      <td>0.670521</td>
    </tr>
    <tr>
      <th>1</th>
      <td>defensemen</td>
      <td>cornerbacks</td>
      <td>0.995745</td>
      <td>0.371968</td>
    </tr>
    <tr>
      <th>2</th>
      <td>hipster</td>
      <td>hip_hop</td>
      <td>0.990213</td>
      <td>0.359780</td>
    </tr>
    <tr>
      <th>3</th>
      <td>punter</td>
      <td>cornerback</td>
      <td>0.904813</td>
      <td>0.352770</td>
    </tr>
    <tr>
      <th>4</th>
      <td>singer_songwriter</td>
      <td>rapper</td>
      <td>0.999137</td>
      <td>0.343185</td>
    </tr>
    <tr>
      <th>5</th>
      <td>defenseman</td>
      <td>defensive_tackle</td>
      <td>0.965712</td>
      <td>0.342796</td>
    </tr>
    <tr>
      <th>6</th>
      <td>pole_vault</td>
      <td>triple_jump</td>
      <td>0.463255</td>
      <td>0.339006</td>
    </tr>
    <tr>
      <th>7</th>
      <td>musicians</td>
      <td>artistes</td>
      <td>0.859174</td>
      <td>0.328106</td>
    </tr>
    <tr>
      <th>8</th>
      <td>tavern</td>
      <td>barbershop</td>
      <td>0.976077</td>
      <td>0.306346</td>
    </tr>
    <tr>
      <th>9</th>
      <td>freestyle_relay</td>
      <td>meter_hurdles</td>
      <td>0.748041</td>
      <td>0.301123</td>
    </tr>
    <tr>
      <th>10</th>
      <td>bacon</td>
      <td>fried_chicken</td>
      <td>0.955136</td>
      <td>0.298132</td>
    </tr>
    <tr>
      <th>11</th>
      <td>equipment</td>
      <td>equipments</td>
      <td>0.750463</td>
      <td>0.294613</td>
    </tr>
    <tr>
      <th>12</th>
      <td>hockey</td>
      <td>basketball</td>
      <td>0.879606</td>
      <td>0.285121</td>
    </tr>
    <tr>
      <th>13</th>
      <td>wool</td>
      <td>cotton</td>
      <td>0.963230</td>
      <td>0.280360</td>
    </tr>
    <tr>
      <th>14</th>
      <td>unassisted_goal</td>
      <td>layup</td>
      <td>0.870970</td>
      <td>0.280274</td>
    </tr>
    <tr>
      <th>15</th>
      <td>chocolates</td>
      <td>sweets</td>
      <td>0.776279</td>
      <td>0.280231</td>
    </tr>
    <tr>
      <th>16</th>
      <td>buddy</td>
      <td>cousin</td>
      <td>0.968458</td>
      <td>0.273012</td>
    </tr>
    <tr>
      <th>17</th>
      <td>priest</td>
      <td>preacher</td>
      <td>0.988195</td>
      <td>0.272797</td>
    </tr>
    <tr>
      <th>18</th>
      <td>blue</td>
      <td>black</td>
      <td>0.949484</td>
      <td>0.269887</td>
    </tr>
    <tr>
      <th>19</th>
      <td>quirky</td>
      <td>funky</td>
      <td>0.904340</td>
      <td>0.266961</td>
    </tr>
    <tr>
      <th>20</th>
      <td>rabbi</td>
      <td>imam</td>
      <td>0.946823</td>
      <td>0.265076</td>
    </tr>
    <tr>
      <th>21</th>
      <td>grapes</td>
      <td>mango</td>
      <td>0.978360</td>
      <td>0.264401</td>
    </tr>
    <tr>
      <th>22</th>
      <td>telecommunications</td>
      <td>telecommunication</td>
      <td>0.512355</td>
      <td>0.261840</td>
    </tr>
    <tr>
      <th>23</th>
      <td>passages</td>
      <td>verses</td>
      <td>0.909501</td>
      <td>0.255701</td>
    </tr>
    <tr>
      <th>24</th>
      <td>er</td>
      <td>o</td>
      <td>0.919915</td>
      <td>0.254029</td>
    </tr>
    <tr>
      <th>25</th>
      <td>acoustic</td>
      <td>soulful</td>
      <td>0.921887</td>
      <td>0.253801</td>
    </tr>
    <tr>
      <th>26</th>
      <td>punting</td>
      <td>punt_returns</td>
      <td>0.851885</td>
      <td>0.253574</td>
    </tr>
    <tr>
      <th>27</th>
      <td>thefts</td>
      <td>armed_robbery</td>
      <td>0.987904</td>
      <td>0.251027</td>
    </tr>
    <tr>
      <th>28</th>
      <td>bar</td>
      <td>nightclub</td>
      <td>0.913451</td>
      <td>0.251026</td>
    </tr>
    <tr>
      <th>29</th>
      <td>digs</td>
      <td>rebounds</td>
      <td>0.948400</td>
      <td>0.249695</td>
    </tr>
  </tbody>
</table>
</div><div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">f</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">15</span><span class="p">))</span>
<span class="n">race_bias_we</span><span class="o">.</span><span class="n">plot_projection_scores</span><span class="p">(</span><span class="n">neutral_profession_names</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">);</span>
</pre></div>
</div>
<img alt="../_images/exploratory-demo-race-bias-words-embedding_10_0.png" src="../_images/exploratory-demo-race-bias-words-embedding_10_0.png" />
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">Ethically</a></h1>






<p>
<iframe src="https://ghbtns.com/github-btn.html?user=EthicallyAI&repo=ethically&type=star&v=2&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../demos.html">Demos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../words-embedding-bias.html">Words Embedding Bias</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/modules.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about/contributing.html">For Contributors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about/changelog.html">Revision History</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about/license.html">License</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="../demos.html">Demos</a><ul>
      <li>Previous: <a href="demo-gender-bias-words-embedding.html" title="previous chapter">Demo - Gender Bias in Words Embedding</a></li>
      <li>Next: <a href="demo-weat-alpha.html" title="next chapter">Demo - Word Embedding Association Test (WEAT) [Alpha Version]</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2018, Shlomi Hod.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.7.6</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.11</a>
      
      |
      <a href="../_sources/notebooks/exploratory-demo-race-bias-words-embedding.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    
    <a href="https://github.com/EthicallyAI/ethically" class="github">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"  class="github"/>
    </a>
    

    
  </body>
</html>